<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Labjack take 3 - Ingots of learning</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="generator" content="Hugo 0.71.1" /><meta itemprop="name" content="Labjack take 3">
<meta itemprop="description" content="So the new U3&rsquo;s came in, and they are very sleek. I also ordered some of the LJ-Tick addons, which take a couple of open FIO (flexible I/O) ports and &ldquo;converts&rdquo; them to DAC&rsquo;s (digital analog control [I think]) with &#43;/- 10 V capabilities.
So this delivery of hardware should solve the two big problems that I was having when using a single U6 - namely that the DAC&rsquo;s on any of the U-series Labjacks only support a USB voltage of0-4 V (at least to my knowledge), and a serious timing issue I was having while attempting to stream data whilst simultaneously sending read/write commands.">
<meta itemprop="datePublished" content="2020-07-01T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-07-01T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="610">
<meta itemprop="image" content="https://drdjing.github.io/images/2020/frontimg/LJ.png">



<meta itemprop="keywords" content="" /><meta property="og:title" content="Labjack take 3" />
<meta property="og:description" content="So the new U3&rsquo;s came in, and they are very sleek. I also ordered some of the LJ-Tick addons, which take a couple of open FIO (flexible I/O) ports and &ldquo;converts&rdquo; them to DAC&rsquo;s (digital analog control [I think]) with &#43;/- 10 V capabilities.
So this delivery of hardware should solve the two big problems that I was having when using a single U6 - namely that the DAC&rsquo;s on any of the U-series Labjacks only support a USB voltage of0-4 V (at least to my knowledge), and a serious timing issue I was having while attempting to stream data whilst simultaneously sending read/write commands." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://drdjing.github.io/blog/labjack3/" />
<meta property="og:image" content="https://drdjing.github.io/images/2020/frontimg/LJ.png" />
<meta property="article:published_time" content="2020-07-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://drdjing.github.io/images/2020/frontimg/LJ.png"/>

<meta name="twitter:title" content="Labjack take 3"/>
<meta name="twitter:description" content="So the new U3&rsquo;s came in, and they are very sleek. I also ordered some of the LJ-Tick addons, which take a couple of open FIO (flexible I/O) ports and &ldquo;converts&rdquo; them to DAC&rsquo;s (digital analog control [I think]) with &#43;/- 10 V capabilities.
So this delivery of hardware should solve the two big problems that I was having when using a single U6 - namely that the DAC&rsquo;s on any of the U-series Labjacks only support a USB voltage of0-4 V (at least to my knowledge), and a serious timing issue I was having while attempting to stream data whilst simultaneously sending read/write commands."/>
<link rel="stylesheet" href="/css/bundle.min.890f30b8b199a3d390afae9cf9f69d7a932a6a7d91fc3a3b9e5b9d780c334432.css" integrity="sha256-iQ8wuLGZo9OQr66c&#43;fadepMqan2R/Do7nludeAwzRDI="><link rel="stylesheet" href="/css/add-on.css">
</head>

  <body>
    <header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/">
        
          
            Blog
          
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu">
      
        
          
          
            <a href="/" class="link"><i class='fa fa-home'></i> Home</a>
          
        
      
        
          
          
            <a href="/about/" class="link"><i class='far fa-id-card'></i> About</a>
          
        
      
        
          
          
            <a href="/blog/" class="link"><i class='far fa-newspaper'></i> Blog</a>
          
        
      
        
          
          
            <a href="/categories/" class="link"><i class='fas fa-sitemap'></i> Categories</a>
          
        
      
        
          
          
            <a href="/contact/" class="link"><i class='far fa-envelope'></i> Contact</a>
          
        
      
      <a href="#share-menu" class="share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
      

    </menu>
    

    <a href="#share-menu" class="share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
    <a href="#lang-menu" class="lang-toggle" lang="en">en</a>
    <a href="#site-nav" class="nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="lang-menu" class="flyout-menu">
  <a href="#" lang="en" class="link active"> (en)</a>
  
    
      
    
  
</menu>

  
    <menu id="share-menu" class="flyout-menu">
      <h1>Share Post</h1>
      




  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fdrdjing.github.io%2fblog%2flabjack3%2f&amp;title=Labjack%20take%203" target="_blank" rel="noopener" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&amp;body=https%3a%2f%2fdrdjing.github.io%2fblog%2flabjack3%2f" target="_blank" class="share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


    </menu>
  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/"><img src="https://drdjing.github.io/images/main/logo.png" class="circle" width="" alt="The wannabe viking" /></a>
  <header>
    <h1>Ingots of learning</h1>
  </header>
  <main>
    <p>The blog of a wayward computational physicist.</p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/drdjing" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/david-ing-091452b2" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




















<li><a href="//telegram.me/DrDavidIng" target="_blank" rel="noopener" title="telegram" class="fab fa-telegram"></a></li>






<li><a href="mailto:dr.david.ing@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        <article class="post">
  <header>
  <div class="title">
    
      <h2><a href="/blog/labjack3/">Labjack take 3</a></h2>
    
    
  </div>
  <div class="meta">
    <time class="published" datetime="2020-07-01 00:00:00 &#43;0000 UTC">
      July 1, 2020
    </time>
    <span class="author"></span>
    
      <p>3 minute read</p>
    
  </div>
</header>

  <section id="socnet-share">
    




  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fdrdjing.github.io%2fblog%2flabjack3%2f&amp;title=Labjack%20take%203" target="_blank" rel="noopener" class="share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by %7b%20%20%20%20%20%20%20%20map%5b%5d%7d&amp;body=https%3a%2f%2fdrdjing.github.io%2fblog%2flabjack3%2f" target="_blank" class="share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


  </section>
  
  <a href="/blog/labjack3/" class="image featured">
    
      <img src="https://drdjing.github.io/images/2020/frontimg/LJ.png" alt="">
    
  </a>


  <div class="content">
    <p>So the new U3&rsquo;s came in, and they are very sleek. I also ordered some of the LJ-Tick addons, which take a couple of open FIO (flexible I/O) ports and &ldquo;converts&rdquo; them to DAC&rsquo;s (digital analog control [I think]) with +/- 10 V capabilities.</p>
<p>So this delivery of hardware should solve the two big problems that I was having when using a single U6 - namely that the DAC&rsquo;s on any of the U-series Labjacks only support a USB voltage of0-4 V (at least to my knowledge), and a serious timing issue I was having while attempting to stream data whilst simultaneously sending read/write commands. Funnily enough, both these issues affected the motor movement part of my code.</p>
<p>The motor control unit is a big old thing from 15 years ago, and from my admittedly amateur understanding, awaits an input high of around 2 V to start motor movement until an input low of around -2 V stops the movement. I need to spend more time with the control unit and an oscilloscope to properly understand what&rsquo;s going on, though perhaps I can crack open the back of the machine and see if there&rsquo;s a circuit diagram? Worth a shot at least.</p>
<p>For the moment, I don&rsquo;t need to understand the exact details, I just need to code something that works and is easily configurable. The timing issue I was having turns out to actually stem from the USB controller itself. The way that streaming works is that it queues up a number of reads (or writes) at once, at a certain frequency. Multiply this frequency by the number of reads, and you end up blocking out your USB controller for, in my case, around 500 ms. Any additional orders will queue on top of this. This isn&rsquo;t good when you want tight timing control of around 100 ms on your signal outputs.</p>
<p>Like I said, though, both of these problems should now be solved with this additional hardware. I&rsquo;ve taken this opportunity to reorganise my code somewhat, following the MVC design pattern. This will be one of my first forays into such a design pattern, but I&rsquo;m confident I can adhere to it well enough for the poor person who comes after me to follow.</p>
<p>The basic structure goes something like:</p>
<p>FIND WAY TO PUT FOLDER STRUCTURE IN HERE</p>
<p>Now, however, I have to deal with two different devices. My first instinct is to implement something I had been avoiding, multiprocessing. I had been avoiding this due to the realisation that different processes don&rsquo;t have shared memory, which would make implementing a graphing procedure incredibly frustrating. However, upon a slightly deeper reading of the documentation, it seems that the multiprocessing suite contains solutions for piping data from one process to another. These are</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">multiprocessing<span style="color:#f92672">.</span>array()
multiprocessing<span style="color:#f92672">.</span>value()
</code></pre></div><p>and there is also the process server, which processes can access the memory of using something called a proxy. This is implemented through the use of a Manager, which the multiprocessing package helpfully provides. From what I can find, it seems that the server manager is a more flexible way to share memory between processes, as then you are not limited to arrays or values, but it does come at a computation cost.</p>
<p>Then there is direct communication between processes, governed in Python by multiprocessing.Queue, and the pipe system. Queue looks to be a more robust communication protocol in that many processes can access the same queue. Piping, however, is directly between two specific processes, and seems to be the preferred method of communication when you need direct 2-way communication. BUT queues are thread and process safe, so I&rsquo;ll be using them for communication.</p>

  </div>
  <footer>
    <ul class="stats">
  
    
    
      <li class="categories">
        <ul>
          
            
            <li><a class="article-category-link" href="https://drdjing.github.io/categories/labjack">LabJack</a></li>
          
            
            <li><a class="article-category-link" href="https://drdjing.github.io/categories/python">Python</a></li>
          
            
            <li><a class="article-category-link" href="https://drdjing.github.io/categories/instrumentation">Instrumentation</a></li>
          
        </ul>
      </li>
    
  
  
    <li class="tags">
      <ul>
        <li>None</li>
      </ul>
    </li>
  
</ul>

  </footer>
</article>

    <article class="post">
      
<div>
  <h2>Say something</h2>
    <form id="post-js-form" class="post-new-comment" method="POST">
      
      <h5 class='post-reply-notice hidden'>
        <span class='post-reply-arrow'></span><span class='post-reply-name'></span>
      </h5>

      
      <input type="hidden" name="options[entryId]" value="6e0ed25f7b85e3d4543637a22d1c4d5c">
      <input type='hidden' name='fields[replyThread]' value=''>
      <input type='hidden' name='fields[replyID]' value=''>
      <input type='hidden' name='fields[replyName]' value=''>

      
      <input required name='fields[name]' type='text' placeholder='Your name (Required)'>
      <input name='fields[website]' type='text' placeholder='Your website'>
      <input required name='fields[email]' type='email' placeholder='Your email address (Required for Gravatar)'>
      <textarea required name='fields[body]' placeholder='Your message. Feel free to use Markdown (Google &#39;Markdown Cheat Sheet&#39;).' rows='10'></textarea>

      
      

      
      <p class='post-submit-notice'>
        <strong class='post-submit-notice-text submit-success hidden'>Thanks for your comment! It will be shown on the site once it has been approved.</strong>
        <strong class='post-submit-notice-text submit-failed hidden'>Sorry, there was an error with your submission.  Please make sure all required fields have been completed and try again.</strong>
      </p>

      
      <input type='submit' value='Submit' class='button'>
      <input type='submit' value='Submitted' class='hidden button' disabled>
      <input type='reset' value='Reset' class='button'>
    </form>
</div>


<div>
  <h2>Comments</h2>

  
    
      <p>Nothing yet.</p>
    
  
</div>

    </article>


<div class="pagination">
  
    <a href="/blog/labjack2/" class="button"><div class="previous"><div>Reworking the LabJack interface</div></div></a>
  
  
    <a href="/blog/mllearning/" class="button"><div class="next"><div>Learning practical machine learning</div></div></a>
  
</div>


      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent posts</h1>
      </header>
      
      <article class="mini-post">
        <section>
          
  <a href="/blog/revc/" class="image featured">
    
      <img src="https://drdjing.github.io/images/2020/frontimg/bioinformatics.png" alt="">
    
  </a>


        </section>
        <header>
          <h1><a href="/blog/revc/">Bioinformatics with Rosalind - REVC</a></h1>
          <time class="published" datetime="">August 4, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="/blog/fib/" class="image featured">
    
      <img src="https://drdjing.github.io/images/2020/frontimg/bioinformatics.png" alt="">
    
  </a>


        </section>
        <header>
          <h1><a href="/blog/fib/">Bioinformatics with Rosalind - FIB</a></h1>
          <time class="published" datetime="">August 4, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          
  <a href="/blog/rna/" class="image featured">
    
      <img src="https://drdjing.github.io/images/2020/frontimg/bioinformatics.png" alt="">
    
  </a>


        </section>
        <header>
          <h1><a href="/blog/rna/">Bioinformatics with Rosalind - RNA</a></h1>
          <time class="published" datetime="">July 23, 2020</time>
        </header>
      </article>
      
      
        <footer>
          <a href="/blog/" class="button">See more</a>
        </footer>
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="/categories">Categories</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="/categories/python/">python<span class="count">9</span></a>
            
          
          <li>
            
              <a href="/categories/bioinformatics/">bioinformatics<span class="count">4</span></a>
            
          
          <li>
            
              <a href="/categories/rosalind/">rosalind<span class="count">4</span></a>
            
          
          <li>
            
              <a href="/categories/instrumentation/">instrumentation<span class="count">3</span></a>
            
          
          <li>
            
              <a href="/categories/labjack/">labjack<span class="count">3</span></a>
            
          
          <li>
            
              <a href="/categories/ai/">ai<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/game-dev/">game-dev<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/gaming/">gaming<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/godot/">godot<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/machine-learning/">machine-learning<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/categories/computation/">computation<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/golang/">golang<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/html/">html<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/julia/">julia<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/categories/matlab/">matlab<span class="count">1</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>David is a computational physicist / programmer / general nerd / wannabe viking. Oh, and he really likes blacksmithing.</p>
      <footer>
        <a href="/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/drdjing" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/david-ing-091452b2" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




















<li><a href="//telegram.me/DrDavidIng" target="_blank" rel="noopener" title="telegram" class="fab fa-telegram"></a></li>






<li><a href="mailto:dr.david.ing@gmail.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    
      &copy; 2020
      
        Ingots of learning
      
    . <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.71.1' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

      <script src="/js/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script><script src="/js/bundle.min.f84cd5344e26e575e8838421320514de8294b19217bf60d977a51cf4dd1bc722.js" integrity="sha256-&#43;EzVNE4m5XXog4QhMgUU3oKUsZIXv2DZd6Uc9N0bxyI="></script>
    <script src="/js/add-on.js"></script>
    </div>
  </body>
</html>
